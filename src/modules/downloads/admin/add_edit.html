<form action="action.php" name="textform" method="post" target="postframe" enctype="multipart/form-data">
<table width="100%" class="table">
<colgroup>
<col width="200" />
<col />
</colgroup>
<tr class="tableheader"><td colspan="2">{if ACTION=='edit'}{LANG[TITLE_DOWNLOADS_EDIT]}{else}{LANG[TITLE_DOWNLOADS_ADD]}{/if}</td></tr>
{if SPRIGHT_DOWNLOADS_EDIT}
<tr>
<td>{LANG[UPLOADER]}:</td>
<td><select name="userid">{if USER_SEND}{USER_SEND}<option value=""></option>{/if}{USER(USERID)}</select></td>
</tr>
{else}
<tr>
<td>{LANG[UPLOADER]}:</td>
<td>{LOGGED_USERNAME}</td>
</tr>
{/if}
{if SET_SECTIONS}<tr>
<td>{LANG[SECTION]}:<br /><small>({LANG[CTRLMULTI]})</small></td>
<td><select name="secid[]" id="seclist" multiple="multiple">{SECTIONS(SECID)}</select></td>
</tr>{/if}
<tr>
<td>{LANG[CATEGORY]}:</td>
<td><select name="catid">{CATLIST}</select></td>
</tr>
<tr>
<td>{LANG[TITLE]}:</td>
<td><input type="text" name="title" value="{TITLE}" size="80" maxlength="255" class="input" style="width:400px;" /></td>
</tr>
<tr>
<td>{LANG[TEASERPIC]}: <small>({LANG[OPTIONAL]})<br />({LANG[CORE_MAXUPLOAD]}: {SET_MAXUPLOAD})</small></td>
<td>
<table width="100%" class="clear">
<colgroup>
<col width="100" />
<col />
</colgroup>
{if TEASERPIC}
<tr><td nowrap="nowrap" style="padding-bottom:3px;"><a href="{TEASERPIC}" target="_blank">{LANG[SHOWPIC]}</a> &nbsp;&raquo;</td><td style="padding-bottom:3px;"><input type="checkbox" name="delpic" id="ip_delpic" value="1" /><label for="ip_delpic"> {LANG[DELPIC]}</label></td></tr>
{/if}
<tr><td nowrap="nowrap">{LANG[TEASERPIC_UPLOAD]}:</td><td><input type="file" name="pic_upload" size="60" /></td></tr>
<tr><td nowrap="nowrap" style="padding-top:3px;">{LANG[TEASERPIC_PATH]}:</td><td style="padding-top:3px;"><input type="text" name="pic_copy" id="pic_copy" value="{PIC_COPY}" class="input" size="53" style="width:260px;" /> <input type="button" name="mediamanager" value="{LANG[CORE_MEDIAMANAGER]}" onclick="javascript:openmm('mediamanager.php?action=mediamanager.index&amp;module=news')" class="button" /></td></tr>
</table>
</td>
</tr>
<tr>
<td>{LANG[INLINESCREENS]}:</td>
<td>{INLINE('text',ID)}</td>
</tr>
<tr>
<td>{LANG[TEXT]}:</td>
<td>{TEXTAREA('text',20,TEXT)}</td>
</tr>
<tr>
<td>{LANG[TAGS]}:<br /><small>({LANG[OPTIONAL]}, {LANG[TAGSINFO]})</small></td>
<td><input type="text" name="tags" value="{TAGS}" size="30" class="input" style="width:400px;" /><div id="taglist" class="taglist"></div></td>
</tr>
<tr>
<td>{LANG[META_DESCRIPTION]}: <small>({LANG[OPTIONAL]})</small></td>
<td><textarea name="meta_description" rows="2" style="width:98%;">{META_DESCRIPTION}</textarea></td>
</tr>
<tr>
<td>{LANG[AUTHOR]}: <small>({LANG[OPTIONAL]})</small></td>
<td><input type="text" name="author" value="{AUTHOR}" size="80" maxlength="255" class="input" style="width:200px;" /></td>
</tr>
<tr>
<td>{LANG[AUTHORLINK]}: <small>({LANG[OPTIONAL]})</small></td>
<td><input type="text" name="author_link" value="{AUTHOR_LINK}" size="80" maxlength="255" class="input" style="width:200px;" /></td>
</tr>
{if MODULE_GALLERY}<tr>
<td>{LANG[LINKGALLERY]}: <small>({LANG[OPTIONAL]})</small></td>
<td>{GALLERIES(GALID)}</td>
</tr>{/if}
{if MODULE_PRODUCTS}<tr>
<td>{LANG[LINKPRODUCT]}: <small>({LANG[OPTIONAL]})</small></td>
<td><select name="prodid">{PRODUCTS(PRODID)}</select></td>
</tr>{/if}
</table>

<table width="100%" class="table" style="margin-top:10px;">
<colgroup>
<col width="200" />
<col />
</colgroup>
<tr class="tableheader"><td colspan="2">{LANG[FILE]}</td></tr>
<tr>
<td>{LANG[LOCATION]}:</td>
<td>
<input type="radio" name="local" value="1" id="local1" onclick="refresh_location()" onchange="refresh_location()"{if LOCAL} checked="checked"{/if} /><label for="local1" onclick="refresh_location()"> {LANG[LOCAL]}</label> &nbsp;
<input type="radio" name="local" value="0" id="local0" onclick="refresh_location()" onchange="refresh_location()"{if !LOCAL} checked="checked"{/if} /><label for="local0" onclick="refresh_location()"> {LANG[EXTERNAL]}</label>
</td>
</tr>
<tr>
<td>{LANG[FILE]}:<br /><small>({LANG[CORE_MAXUPLOAD]}: {SET_MAXUPLOAD})</small></td>
<td>

<table width="100%" class="clear">
{if TEMPFILE}<tr>
<td nowrap="nowrap">{LANG[SENDFILE]}:&nbsp;&nbsp;</td>
<td width="100%"><a href="{TEMPFILE_URL}" target="_blank">{LANG[GETFILE]}</a> <input type="submit" name="enablefile" value="{LANG[ENABLEFILE]}" class="button" /></td>
</tr>
<tr><td colspan="2">&nbsp;</td></tr>{/if}
<tr>
<td nowrap="nowrap">{LANG[UPLOAD]}:&nbsp;&nbsp;</td>
<td width="100%"><input type="file" name="file_upload" size="60" style="margin-bottom:5px;" onchange="setlocal()" /><br /></td>
</tr>
{if !TEMPFILE}<tr>
<td nowrap="nowrap">{LANG[ORURL]}:&nbsp;&nbsp;</td>
<td width="100%"><input type="text" name="file" value="{FILE}" size="53" maxlength="255" class="input" id="file" style="width:260px;" />  <input type="button" name="mediamanager" value="{LANG[CORE_MEDIAMANAGER]}" onclick="javascript:openmm('mediamanager.php?action=mediamanager.index&amp;module=downloads')" class="button" /></td></td>
</tr>{/if}
</table>

</td>
</tr>
<tr id="row_filesize"{if LOCAL} style="display:none;"{/if}>
<td>{LANG[FILESIZE]}:</td>
<td><input type="text" name="filesize" value="{FILESIZE}" size="15" maxlength="20" class="input" style="width:100px;" /> <select name="filesize_format"><option value="byte"{if FILESIZE_FORMAT=='byte'} selected="selected"{/if}>Byte</option><option value="kb"{if FILESIZE_FORMAT=='kb'} selected="selected"{/if}>KB</option><option value="mb"{if FILESIZE_FORMAT=='mb'} selected="selected"{/if}>MB</option><option value="gb"{if FILESIZE_FORMAT=='gb'} selected="selected"{/if}>GB</option></select></td>
</tr>
<tr>
<td>{LANG[FILEFORMAT]}:<br /><small>({LANG[FILEFORMAT_INFO]})</small></td>
<td><input type="text" name="format" value="{FORMAT}" size="15" maxlength="255" class="input" style="width:200px;" /></td>
</tr>
</table>

<table width="100%" class="table" style="margin-top:10px;">
<tr class="tableheader"><td>{LANG[MIRRORS]}</td></tr>
<tr>
<td><table width="1" class="clear">
<tr><td><small>{LANG[TITLE]}:</small></td><td><small>URL:</small></td></tr>
{list MIRROR}{++MIRRORCOUNT}
<tr id="mirror{MIRRORCOUNT}" style="{if MIRROR.DISPLAY}{++MIRRORDISPLAY}{else}display:none;{/if}">
<td align="center" style="white-space:nowrap;"><input type="text" name="mirror{MIRRORCOUNT}_title" value="{MIRROR.TITLE}" size="57" class="input" style="width:200px;" />&nbsp;</td>
<td align="center"><input type="text" name="mirror{MIRRORCOUNT}_url" value="{MIRROR.URL}" size="90" class="input" style="width:500px;" /></td>
</tr>
{/list}
</table>
<p style="margin-top:3px;"><a href="javascript:addmirror();"><img src="design/add.gif" alt="{LANG[NEWLINE]}" title="{LANG[NEWLINE]}" style="vertical-align:middle;" /> {LANG[NEWLINE]}</a></p>
</td>
</tr>
</table>

{if ACTION=='edit' && STARTTIME}
<table width="100%" class="table" style="margin-top:10px;">
<colgroup>
<col width="200" />
<col />
</colgroup>
<tr class="tableheader"><td colspan="2">{LANG[PUBLICATION]}</td></tr>
<tr>
<td>{LANG[STARTTIME]}:</td>
<td>{STARTTIME}</td>
</tr>
<tr>
<td>{LANG[ENDTIME]}: <small>({LANG[OPTIONAL]})</small></td>
<td>{ENDTIME}</td>
</tr>
</table>{/if}

<table width="100%" class="table" style="margin-top:10px;">
<colgroup>
<col width="200" />
<col />
</colgroup>
<tr class="tableheader"><td colspan="2">{LANG[OPTIONS]}</td></tr>
<tr>
<td>{LANG[PASSWORD]}:</td>
<td><input type="text" name="password" value="{PASSWORD}" size="20" maxlength="50" class="input" style="width:150px;" /></td>
</tr>
<tr>
<td>{LANG[LIMIT]}:</td>
<td><input type="text" name="limit" value="{if LIMIT}{LIMIT}{/if}" size="10" maxlength="10" class="input" style="width:60px;" /></td>
</tr>
<tr><td colspan="2">
{if SET_DOWNLOADS_SEARCHABLE}<input type="checkbox" name="searchable" id="ip_searchable" value="1"{if SEARCHABLE} checked="checked"{/if} style="vertical-align:middle;" /><label for="ip_searchable"> {LANG[SEARCHABLE]}</label><br />{/if}
{if MODULE_COMMENTS && SET_DOWNLOADS_COMS}<input type="checkbox" name="allowcoms" id="ip_allowcoms" value="1"{if ALLOWCOMS} checked="checked"{/if} style="vertical-align:middle;" /><label for="ip_allowcoms"> {LANG[ALLOWCOMS]}</label><br />{/if}
{if MODULE_RATINGS && SET_DOWNLOADS_RATINGS}<input type="checkbox" name="allowrating" id="ip_allowrating" value="1"{if ALLOWRATING} checked="checked"{/if} style="vertical-align:middle;" /><label for="ip_allowrating"> {LANG[ALLOWRATING]}</label><br />{/if}
<input type="checkbox" name="restricted" id="ip_restricted" value="1"{if RESTRICTED} checked="checked"{/if} style="vertical-align:middle;" /><label for="ip_restricted"> {LANG[RESTRICTED]}</label><br />
<input type="checkbox" name="top" id="ip_top" value="1"{if TOP} checked="checked"{/if} style="vertical-align:middle;" /><label for="ip_top"> {LANG[TOPDOWNLOAD]}</label><br />
{if SET_DOWNLOADS_REGONLY}<input type="hidden" name="regonly" value="1" />{else}<input type="checkbox" name="regonly" id="ip_regonly" value="1"{if REGONLY} checked="checked"{/if} style="vertical-align:middle;" /><label for="ip_regonly"> {LANG[REGONLY]}</label><br />{/if}
{if ACTION=='add' && RIGHT_DOWNLOADS_ENABLE}<input type="checkbox" name="pubnow" id="ip_pubnow" value="1"{if PUBNOW} checked="checked"{/if} style="vertical-align:middle;" /><label for="ip_pubnow"> {LANG[PUBNOW]}</label><br />{/if}
</td></tr>
</table>

<table width="100%" class="table" style="margin-top:10px;">
<tr class="submit"><td><input type="submit" name="apxsubmit" value="{if ACTION=='add'}{LANG[SUBMIT_ADD]}{else}{LANG[SUBMIT_EDIT]}{/if}" accesskey="s" class="button" />{if ACTION=='add'}{if RIGHT_DOWNLOADS_PADD} <input type="submit" name="submit_padd" value="{LANG[SUBMIT_PADD]}" class="button" />{/if}{/if}</td></tr>
</table>

<input type="hidden" name="action" value="downloads.{ACTION}" />
<input type="hidden" name="id" value="{ID}" />
<input type="hidden" name="send" value="1" />
<input type="hidden" name="sectoken" value="{SECTOKEN}" />
</form>

<script type="text/javascript" src="../lib/yui/connection/connection-min.js"></script>
<script type="text/javascript" src="../lib/yui/datasource/datasource-min.js"></script>
<script type="text/javascript" src="../lib/yui/autocomplete/autocomplete-min.js"></script>
<script type="text/javascript" src="../lib/javascript/tagsuggest.js"></script>

<script type="text/javascript" src="../lib/javascript/objecttoolbox.js"></script>

<script type="text/javascript">

mirrorshown={MIRRORDISPLAY};

function addmirror() {
	if ( mirrorshown>=20 ) return;
	++mirrorshown;
	obj=getobject('mirror'+mirrorshown);
	obj.style.display='';
}

function refresh_location() {
	if ( getobject('local1').checked ) {
		getobject('row_filesize').style.display='none';
	}
	else {
		getobject('row_filesize').style.display='';
	}
}

function setlocal() {
	getobject('local1').checked=true;
	refresh_location();
}

function setexternal() {
	getobject('local0').checked=true;
	refresh_location();
}

yEvent.onDOMReady(function() {
	new TagSuggest(document.forms[0].tags, yDom.get('taglist'), 200);
	{if RIGHT_DOWNLOADS_CATADD}new ObjectToolbox(document.forms[0].catid, 'downloads.catadd');{/if}
	{if RIGHT_PRODUCTS_ADD}new ObjectToolbox(document.forms[0].prodid, 'products.add');{/if}
	{if RIGHT_GALLERY_ADD}new ObjectToolbox(document.forms[0].galid, 'gallery.add');{/if}
});

</script>



